<!DOCTYPE html>
<html>
<head>
  <title>GL</title>
  <style>
    canvas {
      border: 1px solid black;
    }
  </style>

  <script id="shader-vertex-terrain" type="notjs">
 
    attribute vec4 a_Position;
    attribute vec3 a_Normal;

    uniform mat4 u_ProjectionMatrix;
    uniform mat4 u_ViewMatrix;
    uniform mat4 u_ModelMatrix;

    varying vec3 v_Normal;
    varying vec3 v_FragmentPosition;
    varying float v_Height;

    void main() {
      gl_Position = u_ProjectionMatrix * u_ViewMatrix * u_ModelMatrix * a_Position;
      v_Normal = a_Normal;
      v_FragmentPosition = vec3(u_ModelMatrix * a_Position);
      v_Height = a_Position.y / 4.0;
    }
   
  </script>

  <script id="shader-fragment-terrain" type="notjs">
   
    precision mediump float;

    uniform sampler2D u_Texture;

    varying vec3 v_Normal;
    varying vec3 v_FragmentPosition;
    varying float v_Height;

    vec3 getDiffuse() {
      vec3 normal = normalize(v_Normal);

      vec3 lightColor = vec3(1.0, 0.95, 0.85);
      vec3 lightPosition = vec3(200.0, 1000.0, 0.0);
      vec3 lightDirection = normalize(lightPosition - v_FragmentPosition);

      float directionDifference = max(dot(normal, lightDirection), 0.0);
      vec3 diffuse = directionDifference * lightColor;
      return diffuse;
    }

    void main() {
      vec3 texture = texture2D(u_Texture, vec2(v_Height / 5.0, 0.4)).xyz;
      vec3 diffuse = getDiffuse();

      vec3 result = (diffuse);// * (texture / 10.0 + vec3(0.8, 0.8, 0.8));

      gl_FragColor = vec4(result, 1.0);
    }
   
  </script>
</head>
<body>
  <canvas id="canvas"></canvas>

  <script src="dist/bundle.js"></script>
</body>
</html>